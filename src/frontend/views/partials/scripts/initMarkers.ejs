<script>
	function initMarkers(map, route) {
		// Parse through the stringified EJS route
		routeObject = route.replaceAll('&#34;', '"');
		routeObject = JSON.parse(routeObject);
		routeObject = routeObject.route;

		// Loop through the route object and initialize all the markers
		let count = 0;
		for (i = 0; i < routeObject.length; i++) {
			new google.maps.Marker({
				position: new google.maps.LatLng(
					routeObject[i].location.latitude,
					routeObject[i].location.longitude
				),
				map,
			});
			count++;
		}
		// Set how many coordinate pairs there are
		let countText = document.getElementById('count');
		countText.innerHTML = count + ' coordinate pairs';

		// Set how many pieces of data to show off
		const numCoordinatePairs = 5;

		// Create example data
		let data = [];
		for (i = 0; i < numCoordinatePairs; i++) {
			data.push(routeObject[i]);
		}
		let exampleRoute = {
			route: data,
		};
		let dataText = document.getElementById('data');
		dataText.textContent = JSON.stringify(exampleRoute, null, 2);
	}
</script>
