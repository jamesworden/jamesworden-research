<!-- Google Maps API -->
<script
	async
	defer
	src="https://maps.googleapis.com/maps/api/js?key=<%= GOOGLE_MAPS_API_KEY %>&map_ids=b07d0e4dc4f381fb&libraries=places&callback=initMap"
></script>
<!-- Create google maps callback function -->
<script>
	// Google Maps callback function
	function initMap() {
		// Define origin and destination coordinates
		const origin = '<%= origin %>';
		const destination = '<%= destination %>';
		const route = '<%= route %>';

		// Define map
		const map = new google.maps.Map(document.getElementById('map'));
		directionsDisplay = new google.maps.DirectionsRenderer();
		directionsDisplay.setMap(map);

		// Initialize the route & markers on map
		initRoute(map, origin, destination);
		initMarkers(map, route);

		// Initialize autocomple on address inputs
		let autocompleteOrigin = new google.maps.places.Autocomplete(
			document.getElementById('origin')
		);
		let autocompleteDestination = new google.maps.places.Autocomplete(
			document.getElementById('destination')
		);
		// Re-Initialize map whenever the window reloads
		google.maps.event.addDomListener(window, 'load', initMap);
	}
</script>
